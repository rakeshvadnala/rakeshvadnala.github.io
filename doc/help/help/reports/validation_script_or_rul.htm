<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_SP__Side_Nav" data-mc-search-type="Stem" data-mc-help-system-file-name="index.xml" data-mc-path-to-help-system="../" data-mc-has-content-body="True" data-mc-toc-path="[%=System.LinkedTitle%]|[%=System.LinkedTitle%]|[%=System.LinkedTitle%]" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-medium="Online">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Validation Script or Rule</title>
        <link href="../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Fluid/stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Fluid/stylesheets/styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Fluid/stylesheets/tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Fluid/stylesheets/mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../zresources/tablestyles/breadcrumb_table.css" rel="stylesheet" data-mc-stylesheet-type="table" />
        <style>/*&lt;meta /&gt;*/

.button.previous-topic-button
{
	-pie-background: url('../Skins/Default/Stylesheets/Images/arrow-left.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.next-topic-button
{
	-pie-background: url('../Skins/Default/Stylesheets/Images/arrow-right.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.print-button
{
	-pie-background: url('../Skins/Default/Stylesheets/Images/icon-print-gray.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.expand-all-button
{
	-pie-background: url('../Skins/Default/Stylesheets/Images/expand.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.button.collapse-all-button
{
	-pie-background: url('../Skins/Default/Stylesheets/Images/collapse.png') no-repeat center center, linear-gradient(#ffffff, #ececec);
}

.needs-pie
{
	behavior: url('../resources/Scripts/PIE-no-motw.htc');
}

</style>
        <link href="../zresources/tablestyles/standardtable.css" rel="stylesheet" data-mc-stylesheet-type="table" />
        <link href="../zresources/stylesheets/iiq_stylesheet.css" rel="stylesheet" type="text/css" />
        <script src="../resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
    </head>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-drilldown vertical menu off-canvas-list" data-drilldown="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-drilldown-submenu-parent" data-mc-css-tree-node-collapsed="is-drilldown-submenu-parent" data-mc-css-sub-menu="vertical menu slide-in-right is-drilldown-submenu" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="True" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.drilldown" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" role="banner" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-device-width: 1279px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../iiqlandingpage.htm" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <table style="width: 100%;margin-left: 0;margin-right: auto;mc-table-style: url('../zresources/tablestyles/breadcrumb_table.css');" class="TableStyle-Breadcrumb_Table" cellspacing="0">
                                        <col class="TableStyle-Breadcrumb_Table-Column-Column1" />
                                        <col class="TableStyle-Breadcrumb_Table-Column-Column1" />
                                        <tbody>
                                            <tr class="TableStyle-Breadcrumb_Table-Body-Body1">
                                                <td class="TableStyle-Breadcrumb_Table-BodyB-Column1-Body1">
                                                    <div class="nocontent">
                                                        <div class="MCBreadcrumbsBox_0 breadcrumbs" role="navigation" aria-label="{title} topic link" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
                                                        </div>
                                                    </div>
                                                </td>
                                                <td class="TableStyle-Breadcrumb_Table-BodyA-Column1-Body1">
                                                    <div class="buttons popup-container clearfix topicToolbarProxy _Skins_TopicToolBar mc-component nocontent" style="mc-topic-toolbar-items: ;text-align: right;">
                                                        <div class="button-group-container-left">
                                                            <button class="button needs-pie previous-topic-button" title="Navigate previous">
                                                                <img alt="Navigate previous" src="../Skins/Default/Stylesheets/Images/transparent.gif" class="invisible-label" />
                                                            </button>
                                                            <button class="button needs-pie next-topic-button" title="Navigate next">
                                                                <img alt="Navigate next" src="../Skins/Default/Stylesheets/Images/transparent.gif" class="invisible-label" />
                                                            </button>
                                                            <button class="button needs-pie print-button" title="Print">
                                                                <img alt="Print" src="../Skins/Default/Stylesheets/Images/transparent.gif" class="invisible-label" />
                                                            </button>
                                                            <button class="button needs-pie expand-all-button" data-state1-class="expand-all-button" data-state2-class="collapse-all-button" data-state2-title="Collapse all" title="Expand all" data-state1-title="Expand all">
                                                                <img alt="Expand all" src="../Skins/Default/Stylesheets/Images/transparent.gif" class="invisible-label" />
                                                            </button>
                                                        </div>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <div role="main" id="mc-main-content">
                                        <h1><a name="reports_developingcustomreports_3108331984_2712171"></a>Validation Script or Rule</h1>
                                        <p>A validation rule or script is used to validate the data entered on a report form. For example, if a value is required for a specific filter for the report to run, that field can be validated as being non-null by a ValidationRule or ValidationScript. </p>
                                        <p>A Validation script contains the code inline, wrapped in a &lt;Source&gt; element.</p>
                                        <div class="codeSnippet"><a class="codeSnippetCopyButton" role="button" href="javascript:void(0);">Copy</a>
                                            <div class="codeSnippetBody" data-mc-continue="False" data-mc-line-number-start="1" data-mc-use-line-numbers="False"><pre><code>&lt;ValidationScript&gt;<br />&#160;&#160;&#160;&#160;&lt;Source&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;import java.util.*;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;import sailpoint.reporting.*;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;import sailpoint.object.*;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;List messages = new ArrayList();<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;… (validation code goes here - see rule example below)<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return messages;<br />&#160;&#160;&#160;&#160;&lt;/Source&gt;<br />&lt;/ValidationScript&gt;</code></pre>
                                            </div>
                                        </div>
                                        <p>A validation Rule is called by reference:</p>
                                        <div class="codeSnippet"><a class="codeSnippetCopyButton" role="button" href="javascript:void(0);">Copy</a>
                                            <div class="codeSnippetBody" data-mc-continue="False" data-mc-line-number-start="1" data-mc-use-line-numbers="False"><pre><code>&lt;ValidationRule&gt;<br />&#160;&#160;&#160;&#160;&lt;Reference class="sailpoint.object.Rule" id="4028460238ed9b8e0138ed9bf61300ff" name="Privileged Access Report Validation Rule"/&gt;<br />&lt;/ValidationRule&gt;</code></pre>
                                            </div>
                                        </div>
                                        <p>This validation rule checks the field on the Privileged Account Attributes form for a null (or empty) value; the report requires that a value be specified for this field, so an error message is displayed and the report does not run if this field does not pass this validation. A validation script or rule returns a list of messages; if the form passes validation, this list should be empty.</p>
                                        <div class="codeSnippet"><a class="codeSnippetCopyButton" role="button" href="javascript:void(0);">Copy</a>
                                            <div class="codeSnippetBody" data-mc-continue="False" data-mc-line-number-start="1" data-mc-use-line-numbers="False"><pre><code>&lt;Rule language="beanshell" type="ReportValidator" name="Privileged Access Report Validation Rule"&gt;<br />&#160;&#160;&#160;&lt;Description&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;This rule validates the Privileged Access Report Form<br />&#160;&#160;&#160;&#160;&lt;/Description&gt;<br />&#160;&#160;&#160;&#160;&lt;Signature returnType="java.util.List"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&lt;Inputs&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;Argument name="context"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;Description&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;A sailpoint.api.SailPointContext object that can be used to query the database if necessary.<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;/Description&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;/Argument&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;Argument name="report"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;Description&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;The report object<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;/Description&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;/Argument&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;Argument name="form"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;Description&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;The submitted sailpoint Form object.<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;/Description&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;/Argument&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&lt;/Inputs&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&lt;Returns&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;Argument name="messages"&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;Description&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;A list of error messages.<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;/Description&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;/Argument&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&lt;/Returns&gt;<br />&#160;&#160;&#160;&#160;&lt;/Signature&gt;<br />&#160;&#160;&#160;&#160;&lt;Source&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&lt;![CDATA[<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;import java.util.*;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;import sailpoint.object.*;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;import sailpoint.tools.Message;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;List messages = new ArrayList();<br /><br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;Form.Section section = form.getSection("Priviledged Account Attributes");<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;boolean found = false;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;for(FormItem item : section.getItems()){<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Field field = (Field)item;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if(field.getValue() != null &amp;&amp; field.getValue() != "") {<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;found = true;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;}<br /><br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (!found)<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;messages.add(Message.localize("rept_priv_access_err_no_attr"));<br /><br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;return messages;<br />&#160;&#160;&#160;&#160;&#160;&#160;]]&gt;<br />&#160;&#160;&lt;/Source&gt;<br />&lt;/Rule&gt;</code></pre>
                                            </div>
                                        </div>
                                        <h2>ReportSummary: Summary Table</h2>
                                        <p> The &lt;ReportSummary&gt; element describes the summary table in the summary section of the report.</p>
                                        <p>The table header is specified in the title attribute.</p><pre>&lt;ReportSummary title="Uncorrelated Account Details"&gt;</pre>
                                        <p>The report summary has its own datasource; it does not use the same datasource as the report detail grid. The datasource for the report summary can be specified as a script or a rule. A script is most commonly used, but the datasource beanshell can be encapsulated in a rule for reusability if desired. Both are expressed as nested elements (&lt;DataSourceScript&gt; or &lt;DataSourceRule&gt;).</p>
                                        <p>The DataSourceScript or DataSourceRule for the ReportSummary is passed these parameters:</p>
                                        <p>&#160;</p>
                                        <table style="width: 575px;caption-side: top;mc-table-style: url('../zresources/tablestyles/standardtable.css');" class="TableStyle-StandardTable" cellspacing="0">
                                            <col class="TableStyle-StandardTable-Column-Column1" />
                                            <col class="TableStyle-StandardTable-Column-Column1" />
                                            <thead>
                                                <tr class="TableStyle-StandardTable-Head-Header1">
                                                    <td class="TableStyle-StandardTable-HeadE-Column1-Header1">
                                                        <p class="CellHeading">DataSourceScript or Rule Parameters	</p>
                                                    </td>
                                                    <td class="TableStyle-StandardTable-HeadD-Column1-Header1">
                                                        <p class="CellHeading">Contents/Purpose</p>
                                                    </td>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr class="TableStyle-StandardTable-Body-Body1">
                                                    <td class="TableStyle-StandardTable-BodyE-Column1-Body1">
                                                        <p>Context	</p>
                                                    </td>
                                                    <td class="TableStyle-StandardTable-BodyD-Column1-Body1">
                                                        <p>A SailPoint Context object for executing the search</p>
                                                    </td>
                                                </tr>
                                                <tr class="TableStyle-StandardTable-Body-Body2">
                                                    <td class="TableStyle-StandardTable-BodyE-Column1-Body2">
                                                        <p>reportArgs</p>
                                                    </td>
                                                    <td class="TableStyle-StandardTable-BodyD-Column1-Body2">
                                                        <p>	The TaskDefinition argument/attribute map</p>
                                                    </td>
                                                </tr>
                                                <tr class="TableStyle-StandardTable-Body-Body1">
                                                    <td class="TableStyle-StandardTable-BodyE-Column1-Body1">
                                                        <p>Report</p>
                                                    </td>
                                                    <td class="TableStyle-StandardTable-BodyD-Column1-Body1">
                                                        <p>	The entire LiveReport report definition</p>
                                                    </td>
                                                </tr>
                                                <tr class="TableStyle-StandardTable-Body-Body2">
                                                    <td class="TableStyle-StandardTable-BodyE-Column1-Body2">
                                                        <p>baseHql</p>
                                                    </td>
                                                    <td class="TableStyle-StandardTable-BodyD-Column1-Body2">
                                                        <p>	The from and where clause used in the report detail search if the report DataSource was an HQL datasource; null if DataSource type was not HQL</p>
                                                    </td>
                                                </tr>
                                                <tr class="TableStyle-StandardTable-Body-Body1">
                                                    <td class="TableStyle-StandardTable-BodyB-Column1-Body1">
                                                        <p>baseQueryOptions</p>
                                                    </td>
                                                    <td class="TableStyle-StandardTable-BodyA-Column1-Body1">
                                                        <p>	The QueryOptions (specifying the “where” clause criteria) used in the report detail search if the report DataSource was a Filter datasource; null if Datasource type was not Filter</p>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <p>The summary table is usually built from data retrieved through one or more database queries that are specified and executed by the script or rule through the context (SailPointContext object), passing it a QueryOptions object populated with the necessary Filter objects. The example here illustrates how this is done. </p>
                                        <div class="codeSnippet"><a class="codeSnippetCopyButton" role="button" href="javascript:void(0);">Copy</a>
                                            <div class="codeSnippetBody" data-mc-continue="False" data-mc-line-number-start="1" data-mc-use-line-numbers="False"><pre><code>&lt;ReportSummary title="Uncorrelated Account Details"&gt;<br />&#160;&#160;&#160;&#160;&lt;DataSourceScript&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;Source&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;import java.util.*;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;import sailpoint.tools.Util;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;import java.lang.Math;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;import sailpoint.object.*;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;import sailpoint.api.ObjectUtil;<br /><br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;QueryOptions ops = new QueryOptions();<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ops.addGroupBy("correlated");<br /><br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;String sources = "";<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// retrieve list of apps in reportArgs argument map; add IDs to<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// filter and names to CSV list to display as summary's "Sources" value<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (reportArgs.containsKey("correlatedApps")){<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;List apps = reportArgs.getList("correlatedApps");<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (apps != null){<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ops.addFilter(Filter.in("links.application.id", apps));<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;List appNames = ObjectUtil.convertIdsToNames(context, Application.class, apps);<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sources = Util.listToCsv(appNames);<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;List fields = new ArrayList();<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;fields.add("correlated");<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;fields.add("count(*)");<br /><br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;int correlated = 0;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;int uncorrelated = 0;<br /><br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// get counts per Identity with links on the named applications,&#160;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// subdivided by "correlated" flag<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Iterator results = context.search(Identity.class, ops, fields);<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;while(results.hasNext()){<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Object[] row = results.next();<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;int count = Util.otoi(row[1]);<br /><br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// add counts to correlated or uncorrelated totals based on correlated<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// flag<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if ((Boolean)row[0]){<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;correlated += count;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;} else {<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;uncorrelated += count;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// calculate percentage of accounts that are correlated&#160;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;float percent =&#160;&#160;correlated != 0 ? (float)uncorrelated/correlated : 0;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;String percentString = ((int)Math.floor(percent * 100)) +&#160;&#160;"%";<br /><br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// add values to hashmap; these name/value pairs are displayed in the<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// report summary through the XML's LiveReportSummaryValue elements<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Map map = new HashMap();<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;map.put("sources", sources);<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;map.put("correlatedIdentities", correlated);<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;map.put("uncorrelatedIdentities", uncorrelated);<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;map.put("totalIdentities", correlated + uncorrelated);<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;map.put("percentCorrelated", percentString);<br /><br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return map;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;/Source&gt;<br />&#160;&#160;&#160;&#160;&lt;/DataSourceScript&gt;</code></pre>
                                            </div>
                                        </div>
                                        <p>A datasource rule would be specified as a nested element (&lt;DataSourceRule&gt;) that contains a rule reference.</p>
                                        <div class="codeSnippet"><a class="codeSnippetCopyButton" role="button" href="javascript:void(0);">Copy</a>
                                            <div class="codeSnippetBody" data-mc-continue="False" data-mc-line-number-start="1" data-mc-use-line-numbers="False"><pre><code>&lt;DataSourceRule&gt;<br />&lt;Reference class="sailpoint.object.Rule" id="4028460238ed9b8e0138ed9beff9090f" name="UncorrelatedAcct Report Summary Rule"/&gt;<br />&lt;/DataSourceRule&gt;</code></pre>
                                            </div>
                                        </div>
                                        <p>The datasource script or rule returns a hashMap of values that are used to populate the corresponding LiveReportSummaryValue elements (based on their name attributes) in the ReportSummary's Values list. The LiveReportSummaryValue elements each include a unique name and a label attribute. The label can be specified as a string or a localizable message key and is displayed alongside the value in the Report's summary section.<code>&lt;ReportSummary title="Uncorrelated Account Details"&gt;</code></p>
                                        <p style="margin-top: 0pt;font-family: 'Courier New';font-weight: normal;font-style: normal;font-size: 9pt;letter-spacing: 0em;color: #000000;text-decoration: none;"><code> </code>
                                        </p>
                                        <div class="codeSnippet"><a class="codeSnippetCopyButton" role="button" href="javascript:void(0);">Copy</a>
                                            <div class="codeSnippetBody" data-mc-continue="False" data-mc-line-number-start="1" data-mc-use-line-numbers="False"><pre><code>&#160;&#160;&#160;&#160;&lt;DataSourceScript&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;Source&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;…<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Map map = new HashMap();<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;map.put("sources", sources);<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;map.put("correlatedIdentities", correlated);<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;map.put("uncorrelatedIdentities", uncorrelated);<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;map.put("totalIdentities", correlated + uncorrelated);<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;map.put("percentCorrelated", percentString);<br /><br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return map;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;/Source&gt;<br />&#160;&#160;&#160;&#160;&lt;/DataSourceScript&gt;<br />&#160;&#160;&#160;&#160;&lt;Values&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;LiveReportSummaryValue label="rept_uncorrelated_ids_grid_label_auth_sources" name="sources"/&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;LiveReportSummaryValue label="rept_uncorrelated_ids_summary_correlated" name="correlatedIdentities"/&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;LiveReportSummaryValue label="rept_uncorrelated_ids_summary_uncorrelated" name="uncorrelatedIdentities"/&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;LiveReportSummaryValue label="rept_uncorrelated_ids_summary_total_ids" name="totalIdentities"/&gt;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;LiveReportSummaryValue label="rept_uncorrelated_ids_summary_percent" name="percentCorrelated"/&gt;<br />&#160;&#160;&#160;&#160;&lt;/Values&gt;<br />&lt;/ReportSummary&gt;</code></pre>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>